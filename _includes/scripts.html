<html lang="{{ site.locale | slice: 0,2 | default: "en" }}" class="no-js">
<script>
  // Function to initialize the theme toggle
  function initThemeToggle() {
    console.log("Theme toggle script is running");

    // Check for saved preference first
    const savedTheme = localStorage.getItem("darkTheme");
    if (savedTheme === "true") {
      document.documentElement.classList.add("dark-theme");
    }

    // Create the toggle button
    const themeToggle = document.createElement("button");
    themeToggle.className = "theme-toggle";
    themeToggle.setAttribute("aria-label", "Toggle dark mode");
    themeToggle.innerHTML = "ðŸŒ“";
    document.body.appendChild(themeToggle);

    // Toggle theme on button click
    themeToggle.addEventListener("click", () => {
      document.documentElement.classList.toggle("dark-theme");
      console.log("Theme toggled");

      // Save user preference
      const isDarkTheme =
        document.documentElement.classList.contains("dark-theme");
      localStorage.setItem("darkTheme", isDarkTheme);
    });
  }

  // Run on DOMContentLoaded or immediately if already loaded
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", initThemeToggle);
  } else {
    initThemeToggle();
  }
</script>

{% if site.footer_scripts %}
  {% for script in site.footer_scripts %}
    <script src="{{ script | relative_url }}"></script>
  {% endfor %}
{% elsif site.minimal_mistakes_skin == "default" %}
  <script src="{{ '/assets/js/main.min.js' | relative_url }}"></script>
{% endif %}

{% if site.search == true or page.layout == "search" %}
  <script src="{{ '/assets/js/lunr/lunr.min.js' | relative_url }}"></script>
  <script src="{{ '/assets/js/lunr/lunr-store.js' | relative_url }}"></script>
  <script src="{{ '/assets/js/lunr/lunr-en.js' | relative_url }}"></script>
{% endif %}

{% include analytics.html %}
{% include /comments-providers/scripts.html %}

<!-- Custom scripts -->
<script src="{{ '/assets/js/theme-toggle.js' | relative_url }}"></script>
