<html lang="{{ site.locale | slice: 0,2 | default: "en" }}" class="no-js">
<script>
  console.log("Theme toggle script is running");

  const themeToggle = document.createElement("button");
  themeToggle.className = "theme-toggle";
  themeToggle.setAttribute("aria-label", "Toggle dark mode");
  themeToggle.innerHTML = "ðŸŒ“"; // Add icon directly for better visibility
  document.body.appendChild(themeToggle);

  // Check for saved preference
  document.addEventListener("DOMContentLoaded", () => {
    const savedTheme = localStorage.getItem("darkTheme");
    if (savedTheme === "true") {
      document.documentElement.classList.add("dark-theme");
    }
  });

  // Toggle theme on button click
  themeToggle.addEventListener("click", () => {
    document.documentElement.classList.toggle("dark-theme");
    console.log("Theme toggled");

    // Save user preference
    const isDarkTheme =
      document.documentElement.classList.contains("dark-theme");
    localStorage.setItem("darkTheme", isDarkTheme);
  });
</script>
